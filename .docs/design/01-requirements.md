# 유저 시나리오 기반 기능 정의 및 요구사항 명세

## 유비쿼터스 언어

- 유저 → User → 감성 이커머스에서 행동하는 주체
- 상품 → Product → 감성 이커머스에서 판매하는 상품
- 브랜드 → Brand → 상품(Product)을 판매하는 회사명 또는 회사를 지칭하는 별명
- 좋아요 → Like → 상품(Product)마다 한 번씩 사용자가 좋아요(하트)를 누르는 행위
- 쿠폰 → Coupon → 주문(Order) 시 사용할 수 있는 할인 수단
- 주문 항목 → OrderItem → 주문(Order) 당시 상품(Product)의 정보(가격 및 수량)를 스냅샷으로 기록
- 주문 → Order → 여러 주문 항목(OrderItem)을 묶어 유저가 구매하는 단위
- 재고 → Stock → 각 상품(Product)의 판매 가능 수량
- 포인트 → Point → 주문(Order)에 사용되는 화폐

---

## 기능 명세

### 1. 상품 목록 조회

**[유저 스토리]**

- 유저는 전체 상품 목록을 조회할 수 있다.
- 유저는 특정 브랜드의 상품 목록을 조회할 수 있다.
- 유저가 ( 최신 , 가격, 좋아요 ) 기준으로 정렬하여 조회할 수 있다.

**[기능 흐름]**

1. 로그인 유저 또는 비로그인 유저 모두 가능 ( 인증 처리 X )
2. 요청 파라미터 검증하고, 요청 파라미터가 잘못된 경우, 에러를 반환한다.
3. 검색 조건으로 나온 결과를 사용자가 요청한 정렬을 맞춘 후 결과를 반환한다.

---

### 2. 상품 상세 조회

**[유저 스토리]**

- 유저는 특정 상품(가격 및 정보)의 상세 를 조회할 수 있다.

**[기능 흐름]**

1. 로그인 유저 또는 비로그인 유저 모두 가능 ( 인증 처리 X )
2. 요청 파라미터 검증하고, 요청 파라미터가 잘못된 경우, 에러를 반환한다.
    - productId 값 검증 ( 마이너스 또는 0 값인 경우 또는 숫자가 아닌 경우 )
3. 해당 상품이 존재하는 경우, 상세 결과를 반환한다.
   3-1.해당 상품의 ID 가 존재하지 않는 경우, 에러를 반환한다.
4. 유저가 상품 상세를 조회한 내용을 기록한다.

---

### 3. 브랜드 정보 조회

**[유저 스토리]**

- 유저는 유저가 좋아하는 브랜드를 조회할 수 있다.

**[기능 흐름]**

1. 로그인 유저 또는 비로그인 유저 모두 가능 ( 인증 처리 X )
2. 요청 파라미터 검증하고, 요청 파라미터가 잘못된 경우, 에러를 반환한다.
    - brandId 값 검증 ( 마이너스 또는 0 값인 경우 또는 숫자가 아닌 경우 )
3. 해당 브랜드가 존재하는 경우, 브랜드 정보를 반환한다.
   3-1.해당 브랜드의 ID 가 존재하지 않는 경우, 에러를 반환한다.
4. 유저가 브랜드 정보를 조회한 내용을 기록한다.

---

### 4. 상품 좋아요 등록

**[유저 스토리]**

- 유저는 유저가 좋아하는 상품에 "좋아요" 를 할 수 있다.

**[기능 흐름]**

1. 로그인 유저만 가능 ( 인증 처리 O )
2. 좋아요 누르면, 좋아요 정보 저장
   2-1. 해당 상품이 존재하지 않을 경우, 에러를 반환한다.
   2-2. 이미 좋아요한 경우, 정상 응답 반환. ( 멱등성 보장 )
3. 상품에 좋아요 수 반영
4. 정상 응답을 반환한다.

---

### 5. 상품 좋아요 취소

**[유저 스토리]**

- 유저는 자신이 한 좋아요 상품에 "좋아요" 를 철회할 수 있다.

**[기능 흐름]**

1. 로그인 유저만 가능 ( 인증 처리 O )
2. 철회 요청 시, 좋아요 정보 저장 삭제
   2-1. 해당 상품이 존재하지 않을 경우, 에러를 반환한다.
   2-2. 해당 좋아요가 이미 존재하지 않는 경우, 정상 응답 반환 ( 멱등성 보장 )
3. 상품에 좋아요 수 반영

---

### 6.주문 생성 및 결제 흐름

**[유저 스토리]**

- 유저가 상품 여러개를 가지고, 주문을 요청할 수 있다.

**[기능 흐름]**

1. 로그인 유저만 가능 ( 인증 처리 O )
2. 로그인 유저가 존재하는 유저인 지 체크한다.
   2-1. 로그인 유저가 없는 유저인 경우, 에러를 반환한다.
3. 주문 항목들을 유효성 검사를 진행한다.
   3-1. 주문 항목에서 ProductId 가 존재하지 않는 경우, 에러를 반환한다.
   3-2. 주문 항목에서 재고에 비해 주문이 많이 된 경우, 에러를 반환한다.
4. 유저가 주문에서 주문한 총 금액에서 포인트를 차감한다.
   4-1. 차감할 포인트보다 주문한 총 금액이 더 큰 경우, 에러를 반환한다.
5. 주문 정보를 외부 시스템에 전송한다.
6. 주문 결과를 반환한다.

---

### 7. 유저의 주문 목록 조회

**[유저 스토리]**

- 유저가 주문한 목록에 대해서 조회한다.

**[기능 흐름]**

1. 로그인 유저만 가능 ( 인증 처리 O )
2. 주문한 목록에 대해 반환한다.

---

### 8. 유저의 주문 상세 조회

**[유저 스토리]**

- 유저가 주문한 상세에 대해서 조회한다.

**[기능 흐름]**

1. 로그인 유저만 가능 ( 인증 처리 O )
2. 요청 파라미터 검증하고, 요청 파라미터가 잘못된 경우, 에러를 반환한다.
    - orderId 값 검증 ( 마이너스 또는 0 값인 경우 또는 숫자가 아닌 경우 )
3. 해당 주문이 존재하는 경우, 주문 내역을 반환 한다.
   3-1. 해당 주문의 ID가 존재하지 않는 경우, 에러를 반환한다.

---