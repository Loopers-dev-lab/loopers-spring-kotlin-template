---
creation date: 2025-11-19 19:20:17
modification date: 2025-11-19 19:20:17
projects:
  - "[[4주차 - 쿠폰 도메인 적용]]"
areas:
resources:
tags:
to card: false
---
# 요구사항 분석 문서

## 1. 프로젝트 목표 정의

### 1.1 해결하고자 하는 문제

- 신규 이커머스 서비스에서 고객의 구매를 촉진할 수 있는 할인 혜택 시스템이 필요함
- 유연한 할인 정책(정액/정률)을 통해 다양한 프로모션 전략 수립이 가능해야 함

### 1.2 프로젝트 목표

- 사용자가 쿠폰을 발급받고 주문 시 할인 혜택을 받을 수 있는 시스템 구현
- 정액/정률 두 가지 할인 방식 지원
- 쿠폰의 중복 발급 및 중복 사용을 방지하여 시스템 안정성 확보
- 포인트와 함께 사용 가능한 유연한 결제 옵션 제공

### 1.3 기대 효과

- 할인 혜택을 통한 구매 전환율 향상
- 다양한 프로모션 전략 실행 가능

## 2. 도메인 용어집

| 용어     | 정의                                |
| ------ | --------------------------------- |
| 쿠폰     | 시스템에 미리 정의된 할인 혜택 단위              |
| 발급된 쿠폰 | 특정 사용자가 보유하게 된 쿠폰 인스턴스            |
| 정액 쿠폰  | 고정 금액을 할인해주는 쿠폰 (예: 5,000원)       |
| 정률 쿠폰  | 주문 금액의 일정 비율을 할인해주는 쿠폰 (예: 10%)   |
| 쿠폰 발급  | 특정 사용자가 미리 정의된 쿠폰을 발급받아 보유하게 되는 것 |
| 쿠폰 사용  | 주문 시 발급받은 쿠폰을 적용하여 할인을 받는 것       |

## 3. 유스케이스 명세

### 3.1 주요 사용자

- 구매자: 쿠폰을 발급받고 주문 시 사용하는 사용자

### 3.2 구매자의 목표

- 쿠폰을 발급받아 보유한다
- 보유한 쿠폰 목록을 조회한다
- 주문 시 쿠폰을 적용하여 할인받는다

### 3.3 유스케이스 상세

#### UC-1: 쿠폰 발급

**유저 스토리:**

- As a 구매자
- I want to 특정 쿠폰을 발급받고 싶다
- So that 주문 시 할인 혜택을 받을 수 있다

**인수 조건:**

- 쿠폰 ID를 지정하여 해당 쿠폰을 발급받을 수 있다
- 발급된 쿠폰은 사용자의 쿠폰 목록에 추가된다
- 발급 성공 시 발급된 쿠폰 ID와 정보를 확인할 수 있다

**예외 상황:**

- 이미 발급받은 쿠폰을 재발급 시도하면 "이미 발급된 쿠폰입니다" 에러를 확인할 수 있다
- 존재하지 않는 쿠폰 ID로 발급 시도하면 "존재하지 않는 쿠폰입니다" 에러를 확인할 수 있다

#### UC-2: 보유 쿠폰 목록 조회

**유저 스토리:**

- As a 구매자
- I want to 내가 보유한 쿠폰 목록을 조회하고 싶다
- So that 어떤 쿠폰을 사용할 수 있는지 확인할 수 있다

**인수 조건:**

- 사용 가능한 쿠폰(미사용)과 사용된 쿠폰을 구분하여 조회할 수 있다
- 각 쿠폰의 타입, 할인 금액/비율, 사용 여부를 확인할 수 있다

**예외 상황:**

- 보유한 쿠폰이 없는 경우 빈 목록을 확인할 수 있다

#### UC-3: 주문 시 쿠폰 사용

**유저 스토리:**

- As a 구매자
- I want to 주문 시 보유한 쿠폰을 적용하고 싶다
- So that 할인된 금액으로 결제할 수 있다

**인수 조건:**

- 보유한 미사용 쿠폰을 주문에 적용할 수 있다
- 정액 쿠폰은 고정 금액만큼 할인된다
- 정률 쿠폰은 주문 금액의 지정된 비율만큼 할인된다
- 쿠폰 적용 후 포인트로 결제할 수 있다
- 결제 완료 시 쿠폰은 사용됨 상태로 변경된다
- 할인 금액이 주문 금액보다 큰 경우, 할인 금액은 주문 금액과 동일하게 적용된다 (최종 결제 금액 0원)

**예외 상황:**

- 이미 사용된 쿠폰을 사용하려고 하면 "이미 사용된 쿠폰입니다" 에러를 확인할 수 있다
- 보유하지 않은 쿠폰을 사용하려고 하면 "보유하지 않은 쿠폰입니다" 에러를 확인할 수 있다
- 포인트 결제가 실패하면 쿠폰 사용이 롤백되어 다시 사용 가능한 상태가 된다

**Note:**

- 한 주문에 한 개의 쿠폰만 적용 가능
- 쿠폰과 포인트는 동시 사용 가능
- 할인 적용 순서: 쿠폰 할인 → 포인트 결제

## 4. 기술 요구사항

### 4.1 데이터 정합성

**정확성**:

- 동일한 쿠폰의 중복 발급이 방지되어야 함
- 동일한 발급 쿠폰의 중복 사용이 방지되어야 함
- 쿠폰 사용과 포인트 결제는 원자적으로 처리되어야 하며, 어느 한쪽이 실패하면 전체가 롤백되어야 함

### 4.2 에러 처리

**명확한 응답 에러 구분**

- 이미 발급된 쿠폰을 재발급하는 경우
- 존재하지 않는 쿠폰을 발급하는 경우
- 이미 사용된 쿠폰을 사용하는 경우
- 보유하지 않은 쿠폰을 사용하는 경우