# 요구사항 분석 문서: 랭킹 시스템

## 1. 프로젝트 목표 정의

### 1.1 해결하고자 하는 문제

상품에 대한 사용자 행동(조회, 좋아요, 주문)을 종합하여 인기 상품 랭킹을 제공하고자 한다.

### 1.2 프로젝트 목표

조회, 좋아요, 주문 등 사용자 행동을 집계하여 인기 상품 랭킹을 실시간으로 제공한다. 구매자는 인기 상품을 쉽게 탐색할 수 있고, 관리자는 랭킹 정책을 유연하게 조절할 수 있다.

### 1.3 기대 효과

- 인기 상품 노출을 통한 구매 전환율 향상
- 실시간 트렌드 반영으로 사용자 경험 개선

## 2. 도메인 용어집

| 용어 | 정의 |
|-----|-----|
| 인기도 | 조회, 좋아요, 주문 등 사용자 행동을 종합하여 산출한 상품의 인기 지표 |
| 랭킹 | 특정 시간 구간 내 인기도를 기준으로 매겨진 상품 순위 |

## 3. 유스케이스 명세

### 3.1 주요 사용자

- 구매자: 인기 상품 랭킹 조회, 상품 상세에서 순위 확인
- 관리자: 랭킹 Weight 실시간 조절

### 3.2 구매자의 목표

- 인기 상품 랭킹을 조회하여 구매할 상품을 탐색한다
- 관심 있는 상품의 현재 순위를 확인한다

### 3.3 관리자의 목표

- 항목별 Weight를 실시간으로 조절하여 구매 전환을 최대화하는 최적의 Weight를 찾는다

### 3.4 유스케이스 상세

**US-1: 랭킹 조회**

- As a 구매자
- I want to 인기 상품 랭킹을 조회하고 싶다
- So that 인기 있는 상품 중에서 구매할 상품을 탐색할 수 있다

인수 조건:
- 현재 랭킹을 페이지 단위로 조회할 수 있다
- 랭킹 조회 시 상품 ID뿐 아니라 상품 정보(이름, 가격 등)가 함께 제공된다
- 언제 조회하더라도 빈 랭킹이 아닌 유의미한 결과가 반환된다

---

**US-2: 상품 상세에서 순위 확인**

- As a 구매자
- I want to 상품 상세 조회 시 해당 상품의 현재 순위를 확인하고 싶다
- So that 이 상품이 얼마나 인기 있는지 알 수 있다

인수 조건:
- 상품 상세 조회 시 해당 상품의 현재 순위가 함께 반환된다
- 랭킹에 없는 상품은 순위가 null로 반환된다

---

**US-3: Weight 실시간 조절**

- As a 관리자
- I want to 항목별 Weight를 실시간으로 조절하고 싶다
- So that 구매 전환을 최대화하는 최적의 Weight를 찾을 수 있다

인수 조건:
- 관리자가 항목별 Weight를 조회할 수 있다
- 관리자가 항목별 Weight를 변경할 수 있다
- Weight가 변경되면 모든 Score가 재계산된다

에러 케이스:
- 유효하지 않은 Weight 값(음수 등) 입력 시 적절한 에러 응답을 반환한다

## 4. 기술 요구사항 명세

### 4.1 성능 요구사항

| 항목 | 목표 | 근거 |
|-----|-----|-----|
| 랭킹 조회 API (p95) | 50ms 이하 | Redis ZSET 기반, 사용자 체감 지연 없어야 함 |
| Weight 변경 후 Score 재계산 | 수 분 내 | 관리자 작업, 실시간성 불필요 |

### 4.2 데이터 정합성 요구사항

- 사용자 행동 발생 후 랭킹 반영까지 수 분 내 지연 허용
- 랭킹은 대략적인 인기도 지표이므로 엄격한 정합성 불필요
