# 데이터 모델 변경 문서

> 이벤트 기반 트랜잭션 분리 프로젝트의 스키마 변경사항을 정리합니다.

## Payment 테이블 스키마 변경

### 마이그레이션 스크립트

```sql
ALTER TABLE payment
    ADD COLUMN card_type VARCHAR(20),
    ADD COLUMN card_no VARCHAR(19);
```

### 컬럼 설명

| 컬럼 | 타입 | 제약조건 | 설명 |
|------|------|----------|------|
| card_type | VARCHAR(20) | NULLABLE | 카드사 (SAMSUNG, KB, HYUNDAI) |
| card_no | VARCHAR(19) | NULLABLE | 카드번호 (XXXX-XXXX-XXXX-XXXX 형식) |

### 설계 결정

| 결정 | 근거 |
|------|------|
| 임베디드 방식 | CardInfo는 Payment와 1:1 관계이고 항상 함께 조회되므로 별도 테이블 불필요 |
| NULLABLE | `paidAmount > 0`인 경우 필수라는 조건은 애플리케이션 레벨에서 검증 |
| 추가 인덱스 없음 | CardInfo 기반 조회 패턴 없음 |
| 데이터 백필 없음 | 기존 Payment 데이터 없음 |
